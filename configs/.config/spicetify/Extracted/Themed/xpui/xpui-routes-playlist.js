"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3878],{69381:(e,i,a)=>{a.r(i),a.d(i,{ThisIsTourCard:()=>S,default:()=>S,useThisisPlaylistExtensionQuery:()=>g});var n=a(56162),t=a(63082),l=a(3802),s=a(63120),r=a(96170);const d="nX5e9EyU1GmU42OFVHwH",o="pQmF4tvRpUeLWgPKUcW7",c="mGY3ER0iIvb1NbJ1d7X4",m="JHz_5gqDYpq9Lw3pIac_",u="HPCUzqQRn7oae4vJa3y9",k="WO2PkF5DO1fE25IrD2Gy",p="StPcf0AvSM0c18nwF4hJ";var v=a(4637);const S=e=>{const{artistImageUrl:i,artistName:a,artistConcertsUri:S,spec:h}=e,y=(0,r.$P)(),g=(0,r.Wi)(h.concertsCardFactory({identifier:a,uri:S,reason:"This is On Tour phase 1 MVP"}));return i&&a&&S?(0,v.jsxs)("section",{ref:g,className:d,children:[(0,v.jsx)(n.D,{as:"h1",variant:"cello",semanticColor:"textBase",children:l.ag.get("concerts")}),(0,v.jsxs)("div",{className:o,"data-testid":"on-tour-card",children:[(0,v.jsx)("img",{className:c,src:i,alt:""}),(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)(n.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",className:u,children:l.ag.get("concerts_on_tour")}),(0,v.jsx)(n.D,{as:"h1",variant:"cello",className:k,semanticColor:"textBase",children:a}),(0,v.jsx)(s.default,{to:S,className:p,children:(0,v.jsx)(t.P,{as:"span",buttonSize:"sm",onClick:()=>{const e=h.concertsCardFactory({identifier:a,uri:S,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:S});y.logInteraction(e)},children:l.ag.get("concerts_see_all_events")})})]})]})]}):null};var h=a(72071);const y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"thisisPlaylistExtension"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playlistV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Playlist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistsOnTour"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"imageUrl"}},{kind:"Field",name:{kind:"Name",value:"upcomingEventsCount"}}]}}]}}]}}]}}]},g=(e,i)=>(0,h.a)(y,e,i)},28474:(e,i,a)=>{a.r(i),a.d(i,{default:()=>Na});var n=a(59496),t=a(84875),l=a.n(t),s=a(61740),r=a(89605),d=a(56162),o=a(36844),c=a(44501),m=a(50346),u=a(3802),k=a(92403),p=a(462),v=a(4637);const S=(e,i,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(i),lineitem_id:String(a),creative_id:String(i),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),h=({clickTracking:e,clickThrough:i,thirdPartyImpression:a,impression:t,logoUrl:l,advertiserName:r,creativeId:o,lineItemId:c})=>{const m=(0,s.I0)(),[k,h]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(m((0,p.Vw)()),m((0,p.kh)(S("event_viewed",o,c))),()=>{m((0,p.AG)())})),[m,o,c]),(0,v.jsxs)("div",{className:"sponsor-container",children:[(0,v.jsx)(d.D,{variant:"minuet",className:"sponsor-text","data-ta-id":"sponsor-text",children:u.ag.get("playlist.presented_by",r)}),(0,v.jsxs)("div",{className:"sponsor-logo",children:[(0,v.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:i,onClick:()=>{m((0,p.kh)(S("event_clicked",o,c))),h(!0)},children:(0,v.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:l,alt:r,"data-ta-id":"sponsor-logo"})}),(0,v.jsx)("img",{className:"sponsor-logo__imp-pixel",src:t,alt:""}),a&&(0,v.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),k&&(0,v.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},y=({playlistUri:e})=>{const i=(0,s.I0)(),a=(0,s.v9)((i=>i.ads.sponsoredPlaylist.previewAd||i.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,n.useEffect)((()=>{a||i((0,p.fd)(e))}),[i,e,a]),a?(0,v.jsx)("div",{children:(0,v.jsx)(h,{...a})}):null},g=({playlistUri:e})=>{const i=(0,s.I0)(),a=(0,s.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),t=(0,s.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,n.useEffect)((()=>{a||i((0,p.z8)())}),[i,a]);const l=t||a&&((e,i)=>{const a=Date.now()/1e3,n=e.split(":"),t=n[n.length-1];return i.some((({playlistId:e,endTime:i,startTime:n})=>e===t&&a>=n&&a<(i||a+1)))})(e,a);return l?(0,v.jsx)(y,{playlistUri:e}):null};var N=a(75112),b=a(300),f=a(72686),x=a(66476),C=a(73444),T=a(65321),j=a(91703),F=a(49663),A=a(57849),R=a(79475),D=a(66632);const I="hOOwEKqNuXrNvOCB1SgZ",E="csEdkIN9z2LjJIuZraqz",L=({uri:e})=>{const[i,a]=(0,D.Z)(e),t=(0,r.s0)(),l=(0,n.useCallback)((()=>{a(!1),t("/collection/playlists",{replace:!0})}),[t,a]);return(0,v.jsxs)("div",{className:I,children:[(0,v.jsx)(A.l,{iconSize:64}),(0,v.jsxs)("div",{className:E,children:[(0,v.jsx)(d.D,{as:"p",variant:"canon",children:u.ag.get("forbidden-page.title")}),(0,v.jsx)(d.D,{as:"p",variant:"mesto",children:u.ag.get("forbidden-page.description")})]}),i&&(0,v.jsx)(R.D,{colorSet:"invertedLight",onClick:l,children:u.ag.get("remove_from_your_library")})]})};var U=a(33209),P=a(49795),_=a(77312),w=a(89471),V=a(19281),M=a(66806),O=a(29939),B=a(69381),W=a(9877),Q=a(28853),K=a(48271),Z=a(26065),z=a(95663),H=a(32812),J=a(64826),G=a(46895),q=a(80964),X=a(41836),Y=a(82108),$=a(69812),ee=a(21524),ie=a(67565),ae=a(72071),ne=a(48607),te=a(85839),le=a(62134),se=a(12799),re=a(6444),de=a(97411),oe=a(96170),ce=a(42495),me=a(53417),ue=a(98340),ke=a(831),pe=a(75207);const ve=new Set(O.RJ),Se=new Set([]),he={column:null,order:me.kn.NONE},ye=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,rankType:t,scrollToUid:l,usePlayContextItem:s,tracklistDomRef:r}){const d=(0,n.useContext)(te.ZF),{filter:o,setFilter:c}=(0,n.useContext)(M.fo),m=(0,n.useRef)(null),u=(0,n.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,ke.r)(a,u);const{sortState:k,setSortState:p}=(0,n.useContext)(O.Gb),S=(0,n.useCallback)((e=>{p((0,V.VK)(e,k))}),[k,p]);(0,n.useEffect)((()=>{p(he),c("")}),[a,c,p]),(0,n.useEffect)((()=>{m.current&&l&&m.current.scrollToItem({uid:l})}),[l]);const h=(0,n.useCallback)((async(e,i)=>{const n=await d.getContents(a,{offset:e,limit:i,sort:(0,V._j)(k),filter:o,decorateFormatListData:!0});return{items:n.items,totalLength:n.totalLength}}),[a,d,k,o]),y="plays"===t,g=(0,n.useCallback)(((e,i)=>{const n=(0,pe.X)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,v.jsx)(me.h_,{index:i,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:n?.url||"",statusChange:e.formatListAttributes?.status,showPlayCount:y,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:s},i+e.uri)}),[a,y,s]),N=(0,n.useMemo)((()=>y?[me.QD.INDEX,me.QD.TITLE,me.QD.PLAYS,me.QD.ALBUM,me.QD.DURATION]:[me.QD.INDEX,me.QD.TITLE,me.QD.ALBUM,me.QD.DURATION]),[y]),b=(0,n.useCallback)((e=>e.uri),[]),f=(0,n.useCallback)((e=>e.id),[]);return(0,v.jsx)(ue.ZP,{value:"chart-tracklist",children:(0,v.jsx)(me.Pv,{ariaLabel:e,hasHeaderRow:!0,columns:N,sortableColumns:d.getCapabilities().canSort?ve:Se,sortState:k,onSort:S,renderRow:g,resolveUri:b,resolveUid:f,nrTracks:i,fetchTracks:h,limit:100,canFetchAllTracks:d.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:r},a)})}));var ge=a(97320),Ne=a(74567),be=a(3289),fe=a(51016);const xe="x-contributorButton-button",Ce="x-contributorButton-ContributorButton",Te=({uri:e,label:i,onClick:a,...n})=>{const{onCopyLink:t}=(0,fe.l)({uri:e,permissionLevel:"CONTRIBUTOR"});return(0,v.jsx)(be._,{label:i,children:(0,v.jsx)("button",{className:xe,onClick:e=>{a?.(e),t?.()},"aria-label":i,children:(0,v.jsx)(Ne.t,{...n,className:Ce,iconSize:32,"aria-hidden":"true"})})})};var je=a(3882),Fe=a(8930),Ae=a(94254),Re=a(38440);const De=n.memo((({metadata:e,tracklistDomRef:i})=>{const{hasEpisodes:a,isCollaborative:t,formatListData:l,hasDateAdded:s,collaborators:r}=e,d="chart"===l?.type,o="concert-playlist"===l?.type,c="live-streams"===l?.type,m=["blend","celebrity-blend","friends-mix"].indexOf(l?.type||"")>-1,k=!!a,{spec:p,logger:S}=(0,oe.fU)(Fe.createDesktopSearchBarEventFactory,{}),h=(0,n.useCallback)((()=>{S.logInteraction(p.filterFieldFactory().keyStrokeFilter())}),[S,p]),y=(0,n.useCallback)((()=>{S.logInteraction(p.filterFieldFactory().hitClearFilter())}),[S,p]),g=(0,n.useCallback)((()=>{S.logInteraction(p.sortButtonFactory().hitSort())}),[S,p]),N=(0,n.useMemo)((()=>((e,i,a,n,t,l,s,r)=>e?O.RJ:(0,V.RG)(i,a,n,t,l,s,r))(d,t,k,s,o,c,m,r?.count??1)),[d,t,k,s,o,c,m,r]);return(0,v.jsxs)("div",{className:w.Z.searchBoxContainer,children:[(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)(Ae.K,{placeholder:u.ag.get("playlist.search_in_playlist"),onFilter:h,onClear:y,clearOnEscapeInElementRef:i})}),(0,v.jsx)(Re.l,{columns:N,onSort:g})]})}));var Ie=a(20953),Ee=a(28106),Le=a(9374);const Ue="multiUserAttributionDisplayNamesV2";var Pe=a(82849);function _e(e){return(0,Pe.MW)(e)||(0,Pe.JF)(e)}const we=new Set(O.zq),Ve=new Set([]),Me=n.memo((function({ariaLabel:e,nrTracks:i,playlistUri:a,playlistName:t,isCollaborative:l,isMixedMedia:r,isLive:d,isBlend:o,isConcert:c,hasDateAdded:p,canEdit:S,scrollToUid:h,feedbackPath:y,deleteFeedbackPath:g,usePlayContextItem:N,tracklistRef:b,tracklistDomRef:f,nrCollaborators:x=1,canRemove:C,spec:T,initialItems:j}){const F=(0,oe.$P)(),A=(0,n.useContext)(te.ZF),{filter:R}=(0,n.useContext)(M.fo),{sortState:D,setSortState:I}=(0,n.useContext)(O.Gb),E=(0,n.useRef)((()=>{})),[L,U]=(0,n.useState)([]),P=(0,s.I0)(),_=(0,n.useCallback)((()=>{b?.current&&b.current.update()}),[b]);(0,te.rZ)(a,_);const w=(0,n.useCallback)(((e,i)=>{I((0,V.VK)(e,D)),F.logInteraction(T.columnHeaderFactory({identifier:e,position:i||0}).hitSort())}),[I,D,F,T]),B=(0,n.useCallback)((e=>{E.current(),A.remove(a,e)}),[A,a]),W=(0,n.useCallback)(((e,i,a=!1)=>{C&&(E.current=i,e.length>1&&!a?U(e):B(e))}),[C,B]);(0,n.useEffect)((()=>{b?.current&&h&&b.current.scrollToItem({uid:h})}),[h,b]);const Q=(0,n.useCallback)((async(e,i)=>{const n=await A.getContents(a,{offset:e,limit:i,sort:(0,V._j)(D),filter:R,decorateFormatListData:!!y||d||o});return{items:n.items,totalLength:n.totalLength}}),[a,A,D,R,y,d,o]),K=(0,n.useCallback)(((e,i,n)=>{if(!b?.current)return;const t=b.current.getRows()[i];t&&(F.logInteraction(T.dragSort()),n===Ee.W.Before?A.move(a,e,{before:t}):A.move(a,e,{after:t}))}),[b,F,T,A,a]),z=(0,n.useCallback)(((e,i,n)=>{if(!b?.current)return;const t=b.current.getRows()[i];t&&(F.logInteraction(T.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),n===Ee.W.Before?P((0,k.jV)(a,e,{before:{uri:t.uri,uid:t.uid}})):P((0,k.jV)(a,e,{after:{uri:t.uri,uid:t.uid}})))}),[b,F,T,a,P]),H=(0,n.useCallback)((()=>{A.resync(a)}),[A,a]),J=(0,n.useCallback)(((e,i)=>{let n,s;const u=!!(0,Pe.JF)(e)&&e.podcastSubscription.isUserSubscribed;(0,Pe.JF)(e)?(n=e.show,s=e.images.concat(e.show?.images||[])):(0,Pe.MW)(e)&&(n=e.album,s=e.album?.images);const k=(0,pe.X)(s,{desiredSize:40,desiredLabel:"small"});let p=[];S&&D.order===me.kn.NONE&&(p=[Z.a[m.JM.TRACK],Z.a[m.JM.LOCAL_TRACK],Z.a[m.JM.EPISODE]]);const h="1"===e?.formatListAttributes?.["dislike-feedback-selected"];let b=!1;(0,Pe.JF)(e)&&e.podcastSubscription.isPaywalled&&!u?b=!0:_e(e)&&(b=e.isPlayable&&!h);const f=o&&((e,i)=>{const a=[];if(!i)return a;const n=i[Ue]?Ue:"multiUserAttributionDisplayNames",t=i?.[n]?.split(","),l=i?.multiUserAttributionImages?.split(",");if(!t||!l)return a;const s=i?.multiUserAttributionUsernamesV2?.split(",")||[],r=i?.multiUserAttributionType?.split(",")||[],d=t.length;for(let e=0;e<d;e++){const i=s[e],n=i&&(0,m.QK)(i).toURI();a.push({username:i,uri:n,displayName:t[e],images:(o=l[e],o.length>1?[{url:o}]:[]),recsplanation:r[e]})}var o;return a.sort(((i,a)=>i.username?i.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];return(0,v.jsx)(me.dx,{index:i,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:b,duration_ms:_e(e)?e.duration.milliseconds:0,isPaywalled:!!(0,Pe.JF)(e)&&e.podcastSubscription.isPaywalled,isUserSubscribed:u,name:_e(e)?e.name:"",artists:(0,Pe.MW)(e)?e.artists:void 0,albumOrShow:n,isExplicit:(0,Pe.MW)(e)&&e.isExplicit,isCollaborative:l,nrCollaborators:x,isMixedMedia:r,isLocal:(0,Pe.MW)(e)&&e.isLocal,addedBy:f,hasDecoratedAddedBy:A.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Pe.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,Pe.MW)(e)||(0,Pe.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:k?.url||"",onMove:K,onInsert:z,usePlayContextItem:N,allowedDropTypes:p,feedbackPath:y,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:g,isDisliked:h,isLive:d,isBlend:o,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:C,onFeedbackClick:H,playlistName:t,isConcert:c,concertURL:e.formatListAttributes?.artist_concerts_uri,concertDate:e.formatListAttributes?.concert_date,concertVenue:e.formatListAttributes?.venue},i+e.uri)}),[S,D.order,o,a,l,x,r,A,K,z,N,y,g,d,C,H,t,c]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ue.ZP,{value:"playlist-tracklist",children:(0,v.jsx)(me.Pv,{testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:(0,V.RG)(l,r,p,d,c,o,x),sortableColumns:A.getCapabilities().canSort?we:Ve,sortState:D,onSort:w,onRemove:W,renderRow:J,resolveUri:e=>e.uri,resolveUid:e=>e.uid,nrTracks:i,fetchTracks:Q,limit:100,canFetchAllTracks:A.getCapabilities().canFetchAllTracks,outerRef:b,outerDomRef:f,tracks:j,isConcertPlaylist:c},a)}),(0,v.jsx)(Ie.h,{title:u.ag.get("playlist.remove_from_playlist",t),isOpen:L.length>0,tracks:L,onClose:e=>{e.stopPropagation(),U([])},onRemove:B})]})}));var Oe=a(30366),Be=a(54485),We=a(22669),Qe=a(64250);const Ke=n.memo((function({playlistUri:e,playlistLength:i}){const{tracks:a,refresh:t}=((e,i=10)=>{const a=2*i,t=3*i,l=(0,n.useRef)(0),[s,r]=(0,n.useState)(e),[d,o]=(0,n.useState)([]),m=(0,n.useRef)([]),u=(0,n.useContext)(Be.Z),{spec:k,logger:p}=(0,oe.fU)(c.T,{data:{uri:e}}),v=(0,n.useMemo)((()=>k.recommendedFactory()),[k]);(0,n.useEffect)((()=>{const i=u.getEvents(),a=i=>{const a=i.data;a.uri===e&&(a.operation===Qe.If.ADD?o((e=>e.filter((e=>a.uris.every((i=>i!==e.uri)))))):a.operation===Qe.If.REMOVE&&o((e=>e.filter((e=>a.items.every((i=>i.uri!==e.uri)))))))};return i.addListener(Qe.XL.OPERATION_COMPLETE,a),()=>{i.removeListener(Qe.XL.OPERATION_COMPLETE,a)}}),[u,e]),(0,n.useEffect)((()=>(o([]),r(e),m.current=[],l.current=l.current+1,()=>{l.current=l.current+1})),[e]),(0,n.useEffect)((()=>{if(d.length<a){const e=Math.min(a,t-d.length),i=l.current;u.getRecommendedTracks(s,m.current,e).then((a=>{if(i!==l.current)return;const n=a.map((e=>e?.uri&&We.o.from(e.uri).id)).filter((e=>null!==e));a.length<e&&m.current.length?m.current=[]:m.current=[...m.current,...n],o((e=>[...e,...a]))}))}}),[a,t,u,s,d.length]);const S=(0,n.useCallback)((()=>{if(k){const e=v.refreshButtonFactory().hitRefreshContent();p.logInteraction(e)}o((e=>e.slice(i)))}),[p,v,k,i]);return{tracks:d.slice(0,i),_bufferedTracks:d.slice(i),refresh:S}})(e),l=!i||0===i,{usePlayContextItem:s}=(0,ne.n)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:Le.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),r=(0,n.useCallback)(((i,a)=>(0,v.jsx)(me.cp,{index:a,imgUrl:i.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:i.uri,isPlayable:!i.isMOGEFRestricted,name:i.name,artists:i.artists,album:{...i.album,imgUrl:i.album.imageUrl},isExplicit:i.explicit,isMOGEFRestricted:i.isMOGEFRestricted,usePlayContextItem:s},`${a}-${i.uri}`)),[e,s]),o=(0,n.useMemo)((()=>[me.QD.TITLE,me.QD.ALBUM,me.QD.ADD]),[]),m=(0,n.useCallback)((e=>e.uri),[]),k=(0,n.useCallback)((e=>e.id),[]),p=(0,n.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return a.length>0?(0,v.jsxs)("div",{className:w.Z.recommendedTrackList,children:[(0,v.jsx)("div",{className:w.Z.top,children:(0,v.jsxs)("div",{className:w.Z.header,children:[(0,v.jsx)(d.D,{variant:"canon",children:u.ag.get("playlist.extender.recommended.title")}),(0,v.jsx)(d.D,{variant:"mesto",className:w.Z.subtitle,children:l?u.ag.get("playlist.extender.title.in.playlist"):u.ag.get("playlist.extender.songs.in.playlist")})]})}),a.length?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(me.Pv,{ariaLabel:u.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:me.hU,tracks:p,renderRow:r,resolveUri:m,resolveUid:k,columns:o},`${e}-recommended`),(0,v.jsx)(Oe.o,{className:w.Z.refreshButton,onClick:t,children:u.ag.get("playlist.extender.refresh")})]}):null]}):null}));var Ze=a(24697),ze=a(95886),He=a(38191),Je=a(83680),Ge=a(92650),qe=a(58507),Xe=a(80912);const Ye={outerBox:"Uw4gqTFuHRLn4VKga_bJ",shareCardContainer:"SdECNwBCnmkKl0Q0mJff",shareCard:"HLkGXLclDq_7guCiD1Xq",shareCardText:"vWR6alsFpTlgXUckErqF",centerStuff:"EbHQLci0cfLjHmS0AKp2",imgContainer:"HzYFPEbZdd6fQW4jfcz4",profileImg:"SQEgwtR2aj51qFj6cMNZ",playlistImg:"aaNtMSjjJ4cClWoe6K0k",container:"BhtBJTnsM9AotmyN0MPr",backButton:"FwoyMQocCMLEafLlvAk5",closeButton:"xcn0geYcJliTHbvcds12",shareButton:"KptBBI16DBjQBjvPQtlH"};function $e(e){const i=(0,n.useRef)(null);return(0,v.jsx)(ze.Y,{center:!0,onClose:e.onClose,ref:i,withPortal:!0,children:(0,v.jsx)(He.l,{className:Ye.outerBox,"aria-label":"Example showing onClose property",body:(0,v.jsxs)("div",{className:Ye.container,children:[(0,v.jsx)(Oe.o,{buttonSize:"md","aria-label":"IconX",iconOnly:Je.k,onClick:e.onClose,className:Ye.closeButton}),(0,v.jsx)(Oe.o,{buttonSize:"md","aria-label":"IconArrowLeft",iconOnly:qe.D,className:Ye.backButton}),(0,v.jsx)("div",{className:Ye.shareCardContainer,children:(0,v.jsxs)("div",{className:Ye.shareCard,children:[(0,v.jsx)("div",{className:Ye.centerStuff,children:(0,v.jsxs)("div",{className:Ye.imgContainer,children:[(0,v.jsx)(Ze.E,{className:Ye.profileImg,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,v.jsx)(Ze.E,{className:Ye.playlistImg,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,v.jsxs)("div",{className:Ye.shareCardText,children:[(0,v.jsxs)(d.D,{as:"p",variant:"finaleBold",children:[(0,v.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,v.jsxs)(d.D,{as:"p",variant:"alto",children:["IM IN THE ",(0,v.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,v.jsx)("div",{className:Ye.centerStuff,children:(0,v.jsx)(Xe.V,{iconSize:48})})]})}),(0,v.jsx)("div",{className:Ye.shareButton,children:(0,v.jsx)(R.D,{colorSet:"invertedLight",children:"Share"})})]})})})}const ei="nTTPGZGk721M6gfldG43",ii="BFYSUcA4ifYvgDzOQX5Q",ai="el9_37CCpYKxCRKDDyww",ni="FB376b7R1M_0YQZ_SahS",ti="srPBn9_CV0NzQEEzW9f6",li="te8Z8OuKxZx1gbjb7_ua",si=n.memo((function({setuserView:e}){const[i,a]=(0,n.useState)(!1);return(0,v.jsxs)(v.Fragment,{children:[i&&(0,v.jsx)($e,{onClose:()=>{a(!1)}}),(0,v.jsx)(ze.Y,{center:!0,withPortal:!0,children:(0,v.jsx)(He.l,{colorSet:"overMedia","aria-label":"Title",body:(0,v.jsx)("div",{children:(0,v.jsx)(d.D,{as:"p"})}),dialogTitle:(0,v.jsxs)("div",{className:ei,children:[(0,v.jsxs)("div",{className:ai,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)(Ze.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,v.jsx)(Ze.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,v.jsx)(d.D,{as:"h1",variant:"alto",children:"Rap Caviar"})]}),(0,v.jsxs)("div",{className:ii,children:[(0,v.jsx)(Oe.o,{iconOnly:Je.k,onClick:()=>e(!1),className:ti}),(0,v.jsx)(Oe.o,{iconOnly:Ge.o,className:li,onClick:()=>{a(!0)}})]}),(0,v.jsx)("div",{className:ni,children:(0,v.jsx)(d.D,{as:"p",variant:"ballad",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),ri={entrypoint:"__97AKHEfxNtqFsLai1b",imgContainer:"pzFwHV7jvPlWTI6cG5TV",userImage:"iZu1aH8cr2cw98gqmTeo",textContainer:"JRvbfJh7eAZ_1FrQukej"};function di(){const[e,i]=(0,n.useState)(!1);return(0,v.jsxs)(v.Fragment,{children:[e&&(0,v.jsx)(si,{setuserView:i}),(0,v.jsxs)("button",{className:ri.entrypoint,onClick:()=>i(!0),children:[(0,v.jsxs)("div",{className:ri.imgContainer,children:[(0,v.jsx)(Ze.E,{className:ri.userImage,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,v.jsx)(Ze.E,{className:ri.userImage,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,v.jsx)(Ze.E,{className:ri.userImage,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,v.jsxs)("div",{className:ri.textContainer,children:[(0,v.jsx)(d.D,{as:"p",variant:"mestoBold",children:"View employee leaderboard"}),(0,v.jsx)(d.D,{as:"p",variant:"mesto",children:"You're in the top 21% of listeners."})]})]})]})}var oi=a(26588),ci=a(79642),mi=a(22991),ui=a(79102),ki=a(41921);const pi={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Track"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albumOfTrack"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}}]},vi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchV2"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"term"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"5"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"searchV2"},arguments:[{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"term"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"numberOfTopResults"},value:{kind:"Variable",name:{kind:"Name",value:"numberOfTopResults"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"query"}},{kind:"Field",name:{kind:"Name",value:"tracksV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"albums"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"episodes"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topResults"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemsV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"}},{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2TrackWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TrackResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}},...pi.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2ArtistWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Artist"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Artist"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2AlbumWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Album"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Album"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2EpisodesWrapper"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"EpisodeResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Episode"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationSearchV2Episode"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"podcastV2"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},Si={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchAlbum"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationAlbums"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationAlbums"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AlbumResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}},...pi.definitions]},hi={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"queryInlineCurationSearchArtist"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationArtists"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"inlineCurationArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponse"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"discography"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"popularReleasesAlbums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"label"}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}},{kind:"Field",name:{kind:"Name",value:"reason"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"topTracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uid"}},{kind:"Field",name:{kind:"Name",value:"track"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"inlineCurationSearchV2Track"}}]}}]}}]}}]}}]}}]}},...pi.definitions]};var yi=a(73972),gi=a(9603),Ni=a(28418),bi=a(29251);function fi(e){return{type:Le.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,gi.NS)(e.coverArt)}}function xi(e){if("Album"!==e.data.__typename)return null;return fi(e.data)}function Ci(e){if("Artist"!==e.data.__typename)return null;const i=e.data;return{type:Le.p.ARTIST,uri:i.uri,id:i.id,name:i.profile.name,images:(0,gi.NS)(i.visuals.avatarImage)}}function Ti(e){if("Episode"!==e.data.__typename)return null;const i=e.data,a=i.podcastV2.data;return"Podcast"!==a.__typename?null:{type:Le.p.EPISODE,uri:i.uri,id:i.id,name:i.name,images:(0,gi.NS)(i.coverArt),isExplicit:i.contentRating?.label===yi.KS.Explicit,is19PlusOnly:i.contentRating?.label===yi.KS.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:i.playability.playable}}function ji(e){const i=(0,gi.NS)(e.albumOfTrack?.coverArt||null);return{type:Le.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:i.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===yi.KS.Explicit,is19PlusOnly:e.contentRating?.label===yi.KS.NineteenPlus}}function Fi(e){if("Track"!==e.data.__typename)return null;return ji(e.data)}function Ai(e){return(e?.itemsV2??[]).map((e=>{const i=(0,gi.U2)(e,"item");switch(i.__typename){case"AlbumResponseWrapper":return xi(i);case"ArtistResponseWrapper":return Ci(i);case"EpisodeResponseWrapper":return Ti(i);case"TrackResponseWrapper":return Fi(i);default:return(0,bi._)(i),null}})).filter(Ni.K)||[]}const Ri=async(e,i,a=0,n=10,t=10)=>{const l={term:i,offset:a,limit:n,numberOfTopResults:t},s=await e(vi,l),r=s?.data?.searchV2;return r?(o=i,{albums:(k=(d=r).albums,((k?.items??[]).map((e=>xi(e))).filter(Ni.K)||[])??[]),artists:(u=d.artists,((u?.items??[]).map((e=>Ci(e))).filter(Ni.K)||[])??[]),episodes:(m=d.episodes,((m?.items??[]).map((e=>Ti(e))).filter(Ni.K)||[])??[]),tracks:(c=d.tracksV2,((c?.items??[]).map((e=>Fi(e.item))).filter(Ni.K)||[])??[]),topResults:Ai(d.topResults)??[],query:o}):null;var d,o,c,m,u,k},Di=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(Si,t),s=l?.data?.albums;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:i.tracks.items.map((e=>ji(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,bi._)(i),null}}(s):null},Ii=async(e,i,a=50,n=0)=>{const t={uris:[i],limit:a,offset:n},l=await e(hi,t),s=l?.data?.artists;return s?function(e){const i=e.at(0);if(!i)return null;switch(i.__typename){case"Artist":return{albums:i.discography.popularReleasesAlbums.items.map((e=>fi(e)))||[],artists:[],episodes:[],tracks:i.discography.topTracks.items.map((e=>ji(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,bi._)(i),null}}(s):null};var Ei=a(85830),Li=a(48710);const Ui="playlist-inlineSearchBox-filterInputContainer",Pi="playlist-inlineSearchBox-filterInput",_i="playlist-inlineSearchBox-overlay",wi="playlist-inlineSearchBox-searchIconContainer",Vi="playlist-inlineSearchBox-searchIcon",Mi="playlist-inlineSearchBox-clearButton",Oi=n.memo((function({placeholder:e,onChange:i=(()=>{}),onFocus:a=(()=>{})}){const[t,s]=(0,n.useState)(""),r=(0,n.useRef)(null),o=(0,Ei.y1)((e=>{i(e)}),200),c=(0,n.useCallback)((e=>{const i=e.currentTarget.value;s(i),o(i)}),[s,o]),m=(0,n.useCallback)((()=>{r.current&&r.current.focus(),s(""),i("")}),[s,i]),k=(0,n.useCallback)((e=>{"Escape"===e.key&&t&&m()}),[t,m]);return(0,v.jsxs)("div",{className:Ui,role:"search",children:[(0,v.jsx)(d.D,{as:"input",variant:"mesto",ref:r,className:l()(Pi),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:k,onFocus:a,value:t}),(0,v.jsxs)("div",{className:_i,children:[(0,v.jsx)("span",{className:wi,children:(0,v.jsx)(Li.j,{iconSize:16,className:Vi,"aria-hidden":"true"})}),t&&(0,v.jsx)("button",{className:Mi,onClick:m,"aria-label":u.ag.get("search.a11y.clear-input"),children:(0,v.jsx)(Je.k,{iconSize:16})})]})]})})),Bi=({renderRow:e,searchResults:i,renderSeeAllRow:a,seeAllXList:n})=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(me.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:me.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[me.QD.TITLE,me.QD.ALBUM,me.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,v.jsx)(me.Pv,{ariaLabel:u.ag.get("search.title.all"),renderRow:a,rowPlaceholder:me.hU,nrTracks:n.length,tracks:n,resolveUri:e=>e.uri,columns:[me.QD.TITLE,me.QD.ALBUM,me.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]}),Wi=({renderRow:e,searchResults:i})=>(0,v.jsx)(me.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:me.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[me.QD.TITLE,me.QD.ALBUM,me.QD.ADD]}),Qi=({renderRow:e,searchResults:i})=>{const a=i.filter((e=>e.type===Le.p.TRACK)),n=i.filter((e=>e.type===Le.p.ALBUM));return(0,v.jsxs)("div",{children:[(0,v.jsx)(d.D,{as:"p",variant:"cello",className:w.Z.artistResultListTitle,children:u.ag.get("playlist.curation.popular_songs")}),(0,v.jsx)(me.Pv,{ariaLabel:u.ag.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:me.hU,nrTracks:a.length,tracks:a,resolveUri:e=>e.uri,columns:[me.QD.TITLE,me.QD.ALBUM,me.QD.ADD]}),(0,v.jsx)(d.D,{as:"p",variant:"cello",className:w.Z.artistResultListTitle,children:u.ag.get("playlist.curation.albums")}),(0,v.jsx)(me.Pv,{ariaLabel:u.ag.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:me.hU,nrTracks:n.length,tracks:n,resolveUri:e=>e.uri,columns:[me.QD.TITLE,me.QD.ALBUM,me.QD.ADD]})]})},Ki=({renderRow:e,searchResults:i})=>(0,v.jsx)(me.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:me.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[me.QD.TITLE,me.QD.ALBUM,me.QD.ADD]}),Zi=({renderRow:e,searchResults:i})=>(0,v.jsx)(me.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:me.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[me.QD.TITLE,me.QD.ALBUM,me.QD.ADD]}),zi=({renderRow:e,searchResults:i})=>(0,v.jsx)(me.Pv,{ariaLabel:u.ag.get("search.title.top-results"),renderRow:e,rowPlaceholder:me.hU,nrTracks:i.length,tracks:i,resolveUri:e=>e.uri,columns:[me.QD.TITLE,me.QD.ALBUM,me.QD.ADD]});var Hi=a(3770);const Ji="G2t3w2AAeb5OXp0_GeWs",Gi="saVjTFMyWYUz975_tkQm",qi="thi8fNCkEhutRkDC90c0",Xi="pHVlkChuJpEnBQyU3ADv",Yi="ENWs3JxcqtD98_8fbPz2",$i="L8IUKEJL6JiTyE_qUVCc",ea="XcyjdXgsNX0DBt72tfiD",ia="VhJnuS7UcUPfIlzD8dlU",aa="He29vQ5anFj_bJ5iEaI2",na=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,v.jsx)(Hi.RX,{className:Yi,rowIndex:i,"aria-selected":!1,children:(0,v.jsxs)("div",{"aria-label":`${u.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:aa,onClick:n,children:[(0,v.jsxs)(Hi.id,{columnIndex:0,className:$i,children:[void 0!==t?(0,v.jsx)("img",{className:qi,src:t,alt:e.name}):null,(0,v.jsxs)("div",{className:ea,children:[(0,v.jsx)(d.D,{as:"p",className:Xi,variant:"ballad",children:e.name}),(0,v.jsx)(d.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:u.ag.get("album")})]})]}),(0,v.jsx)(Hi.id,{columnIndex:1}),(0,v.jsx)(Hi.id,{columnIndex:2,children:(0,v.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:ia,onClick:n,children:a?(0,v.jsx)(mi.e,{}):(0,v.jsx)(ci.V,{})})})]})})};var ta=a(74991);const la=({size:e})=>(0,v.jsx)("div",{className:Gi,children:(0,v.jsx)(ta.a,{iconSize:e})}),sa=({searchResult:e,index:i,isRTL:a,onClick:n})=>{const t=e.images.at(0)?.url;return(0,v.jsx)(Hi.RX,{className:Yi,rowIndex:i,"aria-selected":!1,children:(0,v.jsxs)("div",{"aria-label":`${u.ag.get("artist-page.tracks.seemore")} ${e.name}`,className:aa,onClick:n,"data-testid":"playlist-inline-curation-artist",children:[(0,v.jsxs)(Hi.id,{columnIndex:0,className:$i,children:[void 0!==t?(0,v.jsx)("img",{className:Ji,src:t,alt:e.name}):(0,v.jsx)(la,{size:16}),(0,v.jsxs)("div",{className:ea,children:[(0,v.jsx)(d.D,{as:"p",className:Xi,variant:"ballad",children:e.name}),(0,v.jsx)(d.D,{as:"p",variant:"mesto",semanticColor:"textSubdued",children:u.ag.get("artist")})]})]}),(0,v.jsx)(Hi.id,{columnIndex:1}),(0,v.jsx)(Hi.id,{columnIndex:2,children:(0,v.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:ia,onClick:n,children:a?(0,v.jsx)(mi.e,{}):(0,v.jsx)(ci.V,{})})})]})})},ra=({episode:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,v.jsx)(me.YK,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:n}),da=({label:e,index:i,isRTL:a,onClick:n})=>(0,v.jsx)(Hi.RX,{className:Yi,rowIndex:i,"aria-selected":!1,children:(0,v.jsxs)("div",{"aria-label":e,className:aa,onClick:n,children:[(0,v.jsx)(Hi.id,{columnIndex:0,className:$i,children:(0,v.jsx)(d.D,{as:"p",className:Xi,variant:"ballad",children:e})}),(0,v.jsx)(Hi.id,{columnIndex:1}),(0,v.jsx)(Hi.id,{columnIndex:2,children:(0,v.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:ia,onClick:n,children:a?(0,v.jsx)(mi.e,{}):(0,v.jsx)(ci.V,{})})})]})}),oa=({track:e,contextUri:i,index:a,usePlayContextItem:n})=>(0,v.jsx)(me.cp,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:i,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:n});let ca=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const ma=(e,i)=>"GO_BACK"===i.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:("NAV_TO_RESULTS"===i.type?e={...e,breadcrumbs:[...e.breadcrumbs,i.level]}:"CHANGE_TERM"===i.type&&(e={term:i.term,breadcrumbs:[{navType:ca.SEARCH,term:i.term,title:""}]}),e),ua=({resultList:e,level:i,isRTL:a,playlistUri:t,navToResults:l,navToEntity:s,term:r})=>{let o=e;const c=(e=>e.filter((e=>e.type===Le.p.TRACK||e.type===Le.p.EPISODE)).map((({uri:e,id:i})=>({type:(0,m.wj)(e)?Le.p.TRACK:Le.p.EPISODE,uri:e,uid:i,provider:null}))))(e),{usePlayContextItem:k}=(0,ne.n)({uri:`${t.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(r)}:${i?.navType??0}`,pages:[{items:c}]},{featureIdentifier:"search"}),p=(0,n.useCallback)(((e,i)=>(0,v.jsx)(da,{isRTL:a,index:i,label:e.label,onClick:()=>{l({navType:e.type,term:r,title:e.label})}},e.uri)),[a,l,r]),S=(0,n.useCallback)(((e,i)=>e.type===Le.p.ARTIST?(0,v.jsx)(sa,{isRTL:a,index:i,searchResult:e,onClick:()=>{s({navType:ca.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===Le.p.EPISODE?(0,v.jsx)(ra,{index:i,episode:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:k},e.uri):e.type===Le.p.TRACK?(0,v.jsx)(oa,{index:i,track:e,contextUri:t.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:k},e.uri):(0,v.jsx)(na,{index:i,isRTL:a,searchResult:e,onClick:()=>{s({navType:ca.ALBUM,uri:e.uri,title:e.name})}},e.uri)),[a,s,t,k]);if(""===r)return(0,v.jsx)("div",{className:w.Z.emptySearchTermContainer});if(!e||0===e?.length)return(0,v.jsxs)("div",{className:w.Z.emptyStateContainer,children:[(0,v.jsx)(d.D,{as:"h1",variant:"canon",children:u.ag.get("search.empty-results-title",r)}),(0,v.jsx)(d.D,{as:"p",variant:"mesto",children:u.ag.get("search.empty-results-text")})]});if(i?.navType===ca.SEARCH){const i=[{type:ca.ARTISTRESULTS,label:u.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:ca.ALBUMRESULTS,label:u.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:ca.TRACKRESULTS,label:u.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return o=e,(0,v.jsx)(Bi,{renderRow:S,searchResults:o,renderSeeAllRow:p,seeAllXList:i})}return i?.navType===ca.ALBUM?(0,v.jsx)(Wi,{renderRow:S,searchResults:o}):i?.navType===ca.ARTIST?(0,v.jsx)(Qi,{renderRow:S,searchResults:o}):i?.navType===ca.ALBUMRESULTS?(0,v.jsx)(Ki,{renderRow:S,searchResults:o}):i?.navType===ca.TRACKRESULTS?(0,v.jsx)(Zi,{renderRow:S,searchResults:o}):i?.navType===ca.ARTISTRESULTS?(0,v.jsx)(zi,{renderRow:S,searchResults:o}):null},ka=({playlistUri:e,onCurationModeChange:i})=>{const[a,t]=(0,n.useState)([]),[l,s]=(0,n.useState)(),r=(0,ui.S)(),{level:o,changeTerm:c,goBack:m,navToEntity:k,navToResults:p,term:S}=(()=>{const[e,i]=(0,n.useReducer)(ma,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:t}=e;return{changeTerm:e=>{i({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{i({type:"GO_BACK"})},navToEntity:e=>{i({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{i({type:"NAV_TO_RESULTS",level:e})},term:t}})(),{request:h}=(0,n.useContext)(ki.Ax);return(0,n.useEffect)((()=>{let e=!0;return(async()=>{if(o)switch(o.navType){case ca.SEARCH:try{if(!l||l.query!==S&&""!==S){const i=await Ri(h,S);e&&s(i)}else""===S&&t([])}catch{t([])}l&&t(l.topResults);break;case ca.ARTISTRESULTS:l&&t(l?.artists);break;case ca.ALBUMRESULTS:l&&t(l?.albums);break;case ca.TRACKRESULTS:l&&t(l?.tracks);break;case ca.EPISODERESULTS:l&&t(l?.episodes);break;case ca.ALBUM:try{const i=await Di(h,o.uri,100,0);e&&i&&t(i.tracks)}catch{t([])}break;case ca.ARTIST:try{const i=await Ii(h,o.uri,100,0);e&&i&&t([...i.albums,...i.tracks])}catch{t([])}}})(),()=>{e=!1}}),[o,S,l,h]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("section",{className:w.Z.playlistInlineCurationSection,children:[(0,v.jsxs)("div",{className:w.Z.playlistInlineCurationWrapper,children:[(0,v.jsx)(d.D,{as:"h1",className:w.Z.playlistInlineCurationTitle,variant:"canon",children:u.ag.get("playlist.curation.title")}),(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)(Oi,{placeholder:u.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{i(!0)},onChange:e=>{c(e)}})})]}),(0,v.jsx)("button",{className:w.Z.playlistInlineCurationCloseButton,onClick:()=>i(!1),children:(0,v.jsx)(Je.k,{"aria-label":u.ag.get("close")})})]}),null!==o&&o.navType!==ca.SEARCH?(0,v.jsxs)("button",{className:w.Z.playlistInlineCurationBackButton,onClick:()=>m(),children:[r?(0,v.jsx)(ci.V,{"aria-label":u.ag.get("navbar.go-back"),className:w.Z.icon}):(0,v.jsx)(mi.e,{"aria-label":u.ag.get("navbar.go-back"),className:w.Z.icon}),(0,v.jsx)(d.D,{as:"p",variant:"cello",children:o.title})]}):null,(0,v.jsx)("div",{className:w.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,v.jsx)(ua,{playlistUri:e,term:S,level:o,resultList:a,navToEntity:k,navToResults:p,isRTL:r})})]})},pa=n.lazy((()=>Promise.all([a.e(1814),a.e(1357),a.e(7405)]).then(a.bind(a,31357)))),va=n.lazy((()=>a.e(7427).then(a.bind(a,98119)))),Sa=n.lazy((()=>a.e(7427).then(a.bind(a,69381)))),ha=n.lazy((()=>a.e(5457).then(a.bind(a,55017)))),ya=n.memo((function({playlist:e,capabilities:i}){const{metadata:{uri:a,name:t,images:p,totalLength:S,unfilteredTotalLength:h,isOwnedBySelf:y,isCollaborative:A,hasEpisodes:R,hasSpotifyTracks:I,canAdd:E,canRemove:L,canPlay:U,formatListData:K,hasDateAdded:ie,collaborators:te,isPublished:se},contents:{items:de}}=e,{spec:me,logger:ue,UBIFragment:ke}=(0,oe.fU)(c.T,{data:{uri:a}}),pe=(0,H.k)(),ve=(0,o.W6)(ce.OC,{loadingValue:!1}),Se=n.useMemo((()=>me.headerFactory()),[me]),he=n.useMemo((()=>me.tracklistFactory()),[me]),Ne="chart"===K?.type,be="concert-playlist"===K?.type&&ve,fe="live-streams"===K?.type,xe=["blend","celebrity-blend","friends-mix"].indexOf(K?.type||"")>-1,Ce=!!R,Fe="artistsets"===K?.type||"this-is"===K?.attributes["editorial.series"],Ae=K?.attributes||{},Re=Ae.header_image_url_desktop||Ae.image_url||null,Ie=E&&L,{inlineCurationModeIsOn:Ee,handleInlineCurationModeChange:Le}=((e,i)=>{const[a,t]=(0,n.useState)(e&&0===i),{scrollNodeChildRef:l}=(0,n.useContext)(ee.VX),s=(0,n.useRef)(a);return(0,n.useEffect)((()=>{const e=!s.current;l&&e&&a&&l.current?.scrollIntoView({block:"end",behavior:"smooth"}),s.current=a}),[l,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{t(e)}}})(Ie,h),Ue=i.canFilter&&h>0,Pe=i.canSort&&h>0,_e=h>0,{productState:we}=(0,s.v9)(Y.Gg),Ve=!!we&&parseInt(we.ads,10)>0,Oe="spotify"===e.metadata.owner.username,Be=(0,s.I0)(),We=(0,r.ur)(),Qe=(0,r.TH)(),Ze=(0,o.W6)(X.v8),ze=(0,o.W6)(X.XP,{loadingValue:!1}),He=(0,o.W6)(ce.NC,{loadingValue:!1}),Je=(0,o.W6)(X.wA,{loadingValue:!1}),Ge=(0,B.useThisisPlaylistExtensionQuery)({uri:a},{cacheTime:5*ae.y,enabled:He&&Fe}).data?.playlistV2,qe="Playlist"===Ge?.__typename?Ge.artistsOnTour?.[0]:null,Xe="POP"!==We?new URLSearchParams(Qe.search).get("uid"):null,[Ye,$e]=(0,D.Z)(a),ei=(0,z.o)(),{filter:ii}=(0,n.useContext)(M.fo),{sortState:ai}=(0,n.useContext)(O.Gb),ni=(0,n.useRef)(null),ti=(0,n.useRef)(null),[li]=p,si=(0,ge.h)(a),ri=(0,J.Z)(null!==Re?Re:li?.url||null,si?"#004989":void 0,si?"#004989":void 0),oi=n.useMemo((()=>me.actionBarFactory()),[me]),{isPlaying:ci,isActive:mi,togglePlay:ui,usePlayContextItem:ki}=(0,ne.n)((0,le.U)(a,(0,V._j)(ai),ii),{featureIdentifier:"playlist"}),pi=(0,n.useCallback)((()=>{const e=(0,q.aK)({isPlaying:ci,isActive:mi,spec:oi.playButtonFactory(),logger:ue,uri:a});ui({loggingParams:e})}),[ci,mi,ui,oi,ue,a]),vi=(0,n.useCallback)((async()=>{ei({targetUri:a,intent:Ye?"unsave":"save",type:"click"});try{await $e(!Ye)}catch{}}),[Ye,ei,$e,a]),Si=(0,n.useCallback)((()=>{const e=oi.shareButtonFactory().hitShare({entityToBeShared:a,shareId:""});ue.logInteraction(e)}),[oi,ue,a]),hi=(0,n.useCallback)((()=>{let e;const i=oi.heartButtonFactory();e=Ye?i.hitUnfollow({itemToBeUnfollowed:a}):i.hitFollow({itemToBeFollowed:a}),ue.logInteraction(e),vi()}),[oi,vi,Ye,ue,a]),yi=(0,n.useCallback)((e=>{const i=e.split(/[\r\n]+/g).map((e=>(0,m.EC)(e))).filter((e=>(0,m.wj)(e)||(0,m.hn)(e)||(0,m.dB)(e)));if(i.length>0&&E){const e=i.map((e=>e.toURI())),n=ni.current?.getSelected()?.slice(-1)?.[0],t={after:n??"end"};Be((0,k.jV)(a,e,t))}}),[E,Be,a]);(0,G.aw)(yi);const gi=(0,n.useCallback)(((e,i)=>{const n=[...i[Z.a[m.JM.TRACK]]||[],...i[Z.a[m.JM.LOCAL_TRACK]]||[],...i[Z.a[m.JM.EPISODE]]||[],...i[Z.a[m.JM.ALBUM]]||[]];n.length>0&&E&&(ue.logInteraction(me.dragAddToPlaylist({playlist:a,itemToBeAdded:n[0]})),Be((0,k.jV)(a,n)),ei({targetUri:a,intent:"add",type:"drop"}))}),[E,ue,me,a,Be,ei]);return(0,v.jsxs)(n.Suspense,{fallback:null,children:[(0,v.jsx)(j.$,{children:(0,re.T5)({playlistName:t,userName:e.metadata.owner.displayName||"",isSpotifyOwned:Oe})}),(0,v.jsx)(T.Z,{types:[Z.a[m.JM.TRACK],Z.a[m.JM.LOCAL_TRACK],Z.a[m.JM.EPISODE],Z.a[m.JM.ALBUM]],onDrop:gi,children:(0,v.jsxs)("section",{role:"presentation",className:w.Z.playlist,"data-testid":"playlist-page","data-test-uri":a,children:[(0,v.jsx)(je.s,{metadata:e.metadata,isPlaying:ci,isPublished:se,togglePlay:pi,backgroundColor:ri,spec:Se}),(0,v.jsxs)("div",{className:w.Z.playlistContent,children:[(0,v.jsxs)(N.o,{backgroundColor:ri,children:[(0,v.jsxs)(N.F,{children:[U?(0,v.jsx)(_.$,{onClick:pi,isPlaying:ci,size:"lg",uri:a,ariaPlayLabel:u.ag.get("playlist.a11y.play",t),ariaPauseLabel:u.ag.get("playlist.a11y.pause",t)}):null,y&&I&&(0,v.jsx)(Q.v,{uri:a,renderEnabled:()=>(0,v.jsx)(W.v,{uri:a})}),y?null:(0,v.jsx)(F.r,{children:(0,v.jsx)(b.H,{isAdded:!!Ye,onClick:hi,size:b.q.md})}),(0,v.jsx)(f.o,{uri:a,isFollowing:!!Ye,canDownload:_e,onClick:(e,i)=>(0,q.l7)(i,oi.downloadButtonFactory(),ue,a),onFollow:vi,size:f.q.md}),(0,v.jsx)(P.F,{property:X.bM,renderNewExperience:()=>e.metadata.permissions?.canAdministratePermissions&&pe?(0,v.jsx)(Te,{onClick:Si,label:u.ag.get("permissions.invite-collaborators",t),uri:a}):null}),(0,v.jsx)($.y,{onShow:()=>(0,q.qq)(oi,ue),menu:(0,v.jsx)(C.X,{uri:a,isPublished:se}),children:(0,v.jsx)(x.z,{label:u.ag.get("more.label.context",t)})}),Ue&&Pe&&(0,v.jsx)(ke,{spec:oi,children:(0,v.jsx)(De,{metadata:e.metadata,tracklistDomRef:ti})})]}),Ze&&(0,v.jsx)(di,{})]}),(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)(va,{formatListData:e.metadata.formatListData})}),qe?.upcomingEventsCount?(0,v.jsx)(Sa,{artistConcertsUri:qe.uri||"",artistImageUrl:qe.imageUrl||"",artistName:qe.title||"",spec:me}):null,(0,v.jsxs)("div",{className:l()("contentSpacing",{[w.Z.mermaidBackground]:(0,o.W6)(X.Cc)&&si}),children:[Ve?(0,v.jsx)(g,{playlistUri:a}):null,ze&&Ve&&Oe?(0,v.jsx)(ha,{playlistUri:a,playlistName:t}):null,e.metadata.hasSpotifyAudiobooks&&Je&&(0,v.jsxs)("div",{className:w.Z.noBooklistSupportContainer,children:[(0,v.jsx)(d.D,{variant:"cello",semanticColor:"textBase",children:"Available in your mobile app"}),(0,v.jsx)(d.D,{variant:"ballad",semanticColor:"textSubdued",children:"Audiobooks playlist are coming soon, text to be changed later."})]}),S>0&&(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)(ke,{spec:he,children:Ne?(0,v.jsx)(ye,{ariaLabel:t,nrTracks:S,playlistUri:a,rankType:Ae.rank_type||"",scrollToUid:Xe,usePlayContextItem:ki,tracklistDomRef:ti},a):(0,v.jsx)(Me,{ariaLabel:t,nrTracks:S,playlistUri:a,playlistName:t,hasDateAdded:ie,isCollaborative:A,isMixedMedia:Ce,isLive:fe,isConcert:be,isBlend:xe,canEdit:Ie,scrollToUid:Xe,feedbackPath:Ae["dislike-endpoint"],deleteFeedbackPath:Ae["delete-endpoint"],usePlayContextItem:ki,tracklistRef:ni,tracklistDomRef:ti,nrCollaborators:te?.count,canRemove:L,spec:he,initialItems:de},a)})}),y&&pe&&(0,v.jsx)(n.Suspense,{fallback:null,children:Ee?(0,v.jsx)(ka,{playlistUri:a,onCurationModeChange:Le}):(0,v.jsx)("button",{className:w.Z.seeMore,onClick:()=>{Le(!0)},children:(0,v.jsx)(d.D,{as:"div",variant:"mestoBold",children:u.ag.get("playlist.curation.find_more")})})}),Ie&&!Ee&&pe?(0,v.jsx)(Ke,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength}):null]})]})]})})]})})),ga=n.memo((function({uri:e}){const i=(0,r.TH)(),a=(0,n.useContext)(te.ZF).getCapabilities(),{isAnonymous:t}=(0,s.v9)(Y.Gg),{isEnhanced:l}=(0,K.U)(e),{filter:d}=(0,n.useContext)(M.fo),{sortState:o}=(0,n.useContext)(O.Gb),{metadataOptions:c,contentsOptions:m}=(0,oi.d)(o,d),k=(0,se.Z)(e,c,m);return(0,n.useEffect)((()=>{const a=new URLSearchParams(i.search).get("prid");if(!t&&a){const i=`https://spclient.wg.spotify.com/algotorial-sharing-service/v1/shared?playlistId=${e}&sharedEntityUri=${a}`;(0,de.k)().request(i,{method:"POST",authorize:!0,allowOffline:!0})}}),[e,t,i.search]),k?k.metadata.permissions&&!k.metadata.permissions.canView?(0,v.jsx)(L,{uri:e}):(0,v.jsx)(Q.v,{uri:e,renderEnabled:()=>l?(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)(pa,{metadata:k.metadata,capabilities:a,featureIdentifier:"playlist"})}):(0,v.jsx)(ya,{playlist:k,capabilities:a}),renderDisabled:()=>(0,v.jsx)(ya,{playlist:k,capabilities:a})}):(0,v.jsx)(U.h,{hasError:!1,errorMessage:u.ag.get("error.not_found.title.playlist"),loadOffline:a.canModifyOffline})})),Na=()=>{const{playlistId:e}=(0,r.UO)(),i=(0,m.FW)((e||"").split("&")[0]).toURI();return(0,v.jsx)(ie.fd,{surface:ie.Tg.PLAYLIST,uris:[i],children:(0,v.jsx)(O.kz,{uri:i,children:(0,v.jsx)(M.hz,{uri:i,children:(0,v.jsx)(ga,{uri:i})})})})}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map